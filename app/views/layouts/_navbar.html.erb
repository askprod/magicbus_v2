<nav id="navbar" class="navbar navbar-dark navbar-expand-lg">

  <%= link_to root_path, class: "navbar-brand" do %>
    <%= image_tag("/images/logo_navbar.png", class: "img-fluid" ) %>
  <% end %>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarTogglerDemo02">

    <ul class="navbar-nav">

      <li class="nav-item dropdown">
        <a class="nav-link adventpro" href="#" id="navbarDropdownNavigation" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Navigation
          <%= fa_icon "caret-down" %>
        </a>
        <div class="dropdown-menu animate slideIn px-2" aria-labelledby="navbarDropdownNavigation">
          <%= link_to discover_path, class:"dropdown-item m-0 adventpro text-center" do %>
            Discover
          <% end %>
          <%= link_to story_path, class:"dropdown-item m-0 adventpro text-center" do %>
            Story
          <% end %>
          <%= link_to places_path, class:"dropdown-item m-0 adventpro text-center" do %>
            Share
          <% end %>
          <%= link_to trips_path, class:"dropdown-item m-0 adventpro text-center" do %>
            Travel
          <% end %>
        </div>
      </li>

      <% if user_signed_in? %>
        <li class="nav-item dropdown">
          <a class="nav-link adventpro" href="#" id="navbarDropdownMagicMe" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <% if current_user.picture.attached? %>
                  <%= image_tag(current_user.picture, height: 18, width: 18, style: "border-radius:20px;") %>
              <% else %>
                <%= fa_icon "user" %>
              <% end %>
                Magic<%= current_user.first_name %>
                <%= fa_icon "caret-down" %>
          </a>

          <div class="dropdown-menu animate slideIn px-2" aria-labelledby="navbarDropdownMagicMe">
              <%= link_to(edit_user_registration_path, remote: true, class:"dropdown-item m-0 adventpro text-center") do %>
                My Account
              <% end %>

              <% unless current_user.orders.empty? %>
                  <%= link_to orders_path, class:"dropdown-item m-0 adventpro text-center" do %>
                      My Bookings
                  <% end %>
              <% end %>

              <%= link_to cart_path(@cart), class:"dropdown-item m-0 adventpro text-center" do %>
                <span id="my-cart-counter">
                  <%= render partial: "layouts/cart-counter" %>
                </span>
              <% end %>
          </div>
        </li>
      <% end %>

    </ul>

    <ul class="navbar-nav ml-auto ml-0">

      <% if user_signed_in? %>
        <li class="nav-item adventpro">
          <%= link_to destroy_user_session_path, class:"nav-link mx-1", method: :delete do %>
            <span class="m-0">Log Out</span>
          <% end %>
        </li>
      <% else %>
        <li class="nav-item adventpro">
        <%= link_to new_user_registration_path, class:"nav-link mx-1", remote: true do %>
            <span class="m-0">Create an Account</span>
        <% end %>
        </li>
        <li class="nav-item adventpro">
        <%= link_to user_session_path, class:"nav-link mx-1", remote: true do %>
            <span class="m-0">Log In</span>
        <% end %>
        </li>
      <% end %>

      <div class="mx-5">
        <% if user_signed_in? && current_user.admin? %>
            <%= link_to rails_admin.dashboard_path, class: "btn btn-danger my-auto" do %>
              <span class="m-0 adventpro">ADMIN PAGE</span>
            <% end %>
        <% end %>

        <%= link_to trips_path, class:"form-inline btn btn-stylised border border-warning my-auto" do %>
          <span class="m-0 adventpro">BOOK NOW</span>
        <% end %>
      </div>

      <% if I18n.locale == :fr %>
        <li class="nav-item">
          <%= link_to({:locale=> nil}, class:"nav-link mx-1") do %>
            <%= flag_icon(:gb) %>
          <% end %>
        </li>
      <% else %>
        <li class="nav-item">
          <%= link_to({:locale=>'fr'}, class:"nav-link mx-1") do %>
            <%= flag_icon(:fr) %>
          <% end %>
        </li> 
      <% end %>

      <li class="nav-item adventpro">
        <%= link_to("https://www.facebook.com/magicbusworld", class: "nav-link mx-1", target: "_blank")  do %>
          <%= fa_icon "facebook-square lg" %>
        <% end %>
      </li>

      <li class="nav-item adventpro">
        <%= link_to("https://www.instagram.com/magicbusworld/", class:"nav-link mx-1", target: "_blank") do %>
          <%= fa_icon "instagram lg" %>
        <% end %>
      </li>

    </ul>

  </div>
</nav>


